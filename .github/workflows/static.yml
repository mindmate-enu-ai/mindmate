<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MindMate Website</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.net.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.8.0/vanilla-tilt.min.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"></script>
    <script type="module" src="https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;700&family=Orbitron:wght@400;700&display=swap"
        rel="stylesheet"
    />
    <style>
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="bg-mindmate-bg dark:bg-gray-900 transition-colors duration-500">
    <div id="root"></div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, serverTimestamp, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Global Firebase Config ---
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

        // Configure Tailwind JIT mode and custom colors
        const tailwindConfig = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        'mindmate-blue': {
                            light: '#8E9BFF',
                            DEFAULT: '#6A67FE',
                            dark: '#4B49AF',
                        },
                        'mindmate-purple': {
                            light: '#A06EFC',
                            DEFAULT: '#7947FF',
                            dark: '#5836B2',
                        },
                        'mindmate-bg': {
                            DEFAULT: '#F5F7FA',
                            dark: '#1A202C',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        heading: ['Poppins', 'sans-serif'],
                    },
                },
            },
            plugins: [],
        };

        // Initialize Firebase services
        let db;
        let auth;
        if (Object.keys(firebaseConfig).length > 0) {
            const app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            setLogLevel('error');
            if (initialAuthToken) {
                signInWithCustomToken(auth, initialAuthToken).catch(console.error);
            } else {
                signInAnonymously(auth).catch(console.error);
            }
        }

        // State management
        let currentPage = 'Home';
        let theme = 'light';
        
        // Root element
        const root = document.getElementById('root');

        // Render function
        const render = () => {
            const content = getPageContent(currentPage);
            root.innerHTML = '';
            root.appendChild(content);

            // Apply animations after rendering
            setTimeout(() => {
                initializeAnimations();
            }, 100);
        };

        const setPage = (pageName) => {
            currentPage = pageName;
            render();
        };
        
        const toggleTheme = () => {
            theme = theme === 'light' ? 'dark' : 'light';
            document.documentElement.className = theme === 'dark' ? 'dark' : '';
            render();
        };

        const getPageContent = (pageName) => {
            const container = document.createElement('div');
            container.className = 'bg-mindmate-bg dark:bg-gray-900 transition-colors duration-500';

            const navbar = createNavbar();
            const main = document.createElement('main');
            const pageContent = createPage(pageName);
            const footer = createFooter();

            main.appendChild(pageContent);
            container.appendChild(navbar);
            container.appendChild(main);
            container.appendChild(footer);

            return container;
        };

        const createNavbar = () => {
            const nav = document.createElement('nav');
            nav.className = "fixed top-0 left-0 w-full z-50 bg-white bg-opacity-80 dark:bg-gray-900 dark:bg-opacity-80 backdrop-blur-md shadow-sm";
            nav.innerHTML = `
                <div class="container mx-auto px-4 flex justify-between items-center py-4">
                    <h1 class="text-xl font-bold font-heading text-mindmate-blue dark:text-mindmate-blue-light cursor-pointer">MindMate</h1>
                    <div class="hidden md:flex space-x-8">
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="Home">Home</button>
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="About">About</button>
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="Features">Features</button>
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="HowItWorks">How It Works</button>
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="Pricing">Pricing</button>
                        <button class="text-mindmate-bg-dark dark:text-mindmate-bg hover:text-mindmate-blue transition-colors duration-200" data-page="Contact">Contact</button>
                    </div>
                    <button class="text-mindmate-bg-dark dark:text-mindmate-bg text-sm px-4 py-2 rounded-full border border-mindmate-purple hover:bg-mindmate-purple hover:text-white transition-all duration-300" id="theme-toggle-btn">
                        ${theme === 'light' ? 'Dark Mode' : 'Light Mode'}
                    </button>
                </div>
            `;
            nav.querySelectorAll('button[data-page]').forEach(button => {
                button.addEventListener('click', () => setPage(button.dataset.page));
            });
            nav.querySelector('h1').addEventListener('click', () => setPage('Home'));
            nav.querySelector('#theme-toggle-btn').addEventListener('click', toggleTheme);
            return nav;
        };
        
        const createFooter = () => {
            const footer = document.createElement('footer');
            footer.className = "bg-white dark:bg-gray-900 text-mindmate-bg-dark dark:text-mindmate-bg py-8";
            footer.innerHTML = `
                <div class="container mx-auto px-4 text-center">
                    <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-8 mb-4">
                        <button class="hover:text-mindmate-blue transition-colors duration-200" data-page="Home">Home</button>
                        <button class="hover:text-mindmate-blue transition-colors duration-200" data-page="About">About</button>
                        <button class="hover:text-mindmate-blue transition-colors duration-200" data-page="Features">Features</button>
                        <button class="hover:text-mindmate-blue transition-colors duration-200" data-page="Contact">Contact</button>
                    </div>
                    <div class="flex justify-center space-x-6 mb-4">
                        <!-- Social links SVGs can go here -->
                    </div>
                    <p class="text-sm">&copy; 2025 MindMate AI. All rights reserved.</p>
                    <p class="text-sm mt-2">Developed with passion by <span class="font-bold text-mindmate-blue">Surya</span></p>
                </div>
            `;
            footer.querySelectorAll('button[data-page]').forEach(button => {
                button.addEventListener('click', () => setPage(button.dataset.page));
            });
            return footer;
        };

        const createPage = (pageName) => {
            let page;
            switch (pageName) {
                case 'Home':
                    page = document.createElement('section');
                    page.id = 'home';
                    page.className = "relative h-screen w-full flex items-center justify-center overflow-hidden pt-16";
                    page.innerHTML = `
                        <div id="vanta-bg" class="absolute inset-0 z-0"></div>
                        <div class="z-10 text-center px-4">
                            <h1 class="text-4xl sm:text-6xl font-extrabold font-heading text-mindmate-blue dark:text-mindmate-blue-light transition-colors duration-500 mb-4">Your AI Companion for Emotional Wellness</h1>
                            <p class="text-lg sm:text-2xl text-mindmate-bg-dark dark:text-mindmate-bg leading-relaxed max-w-3xl mx-auto mb-8">Detect, understand, and manage emotions anytime, anywhere. MindMate helps students find balance and focus.</p>
                            <div class="flex flex-col sm:flex-row justify-center space-y-4 sm:space-y-0 sm:space-x-4">
                                <button class="bg-mindmate-purple text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">Download App</button>
                                <button class="bg-white text-mindmate-purple font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">Learn More</button>
                            </div>
                        </div>
                    `;
                    break;
                case 'About':
                    page = document.createElement('section');
                    page.id = 'about';
                    page.className = "bg-mindmate-bg dark:bg-mindmate-bg-dark text-mindmate-bg-dark dark:text-mindmate-bg py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-12">About MindMate</h2>
                            <div class="flex flex-col md:flex-row items-center justify-between space-y-12 md:space-y-0 md:space-x-12">
                                <div class="md:w-1/2">
                                    <p class="text-lg leading-relaxed mb-6">In today's fast-paced academic environment, students often face unprecedented levels of stress and anxiety. The constant pressure to perform, combined with digital distractions, can lead to burnout and a decline in mental well-being.</p>
                                    <p class="text-lg leading-relaxed">MindMate is the solution. Our AI-driven platform analyzes subtle cues in your voice, facial expressions, and text to provide a real-time understanding of your emotional state. This isn't just about detection—it's about empowerment. We give you the tools and personalized guidance to manage your emotions, improve focus, and build lasting resilience.</p>
                                </div>
                                <div class="md:w-1/2 flex justify-center">
                                    <img src="unnamed.png" alt="A student using the MindMate app." class="rounded-lg shadow-xl w-full max-w-sm"/>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Features':
                    page = document.createElement('section');
                    page.id = 'features';
                    page.className = "bg-white dark:bg-gray-800 text-mindmate-bg-dark dark:text-mindmate-bg py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-16">Features Designed for You</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12">
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-center tilt-element">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 13H9c-1.1 0-2-.9-2-2V9c0-1.1.9-2 2-2h2v6zm5 0h-2v-6h2c1.1 0 2 .9 2 2v2c0 1.1-.9 2-2 2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Emotion Detection</h3>
                                    <p class="text-sm">Our AI analyzes audio and video to provide real-time emotional insights.</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-center tilt-element">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v6h-2zm0 8h2v2h-2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Personalized Recommendations</h3>
                                    <p class="text-sm">Receive tailored tips for study, mindfulness, and stress relief based on your emotional data.</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-center tilt-element">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-2v-2h2v2zm-4 0h-2v-2h2v2zm-4 0H7v-2h2v2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Analytics Dashboard</h3>
                                    <p class="text-sm">Track your emotional patterns over time and gain valuable insights into your mental wellness journey.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'HowItWorks':
                    page = document.createElement('section');
                    page.id = 'how-it-works';
                    page.className = "bg-mindmate-bg dark:bg-mindmate-bg-dark text-mindmate-bg-dark dark:text-mindmate-bg py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-16">How It Works</h2>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-12">
                                <div class="text-center p-6 bg-white dark:bg-gray-700 rounded-lg shadow-lg">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zM17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.98 3.58 7.29 8 7.91V22h2v-3.09c4.42-.62 8-3.93 8-7.91h-2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Record</h3>
                                    <p class="text-sm">Capture your voice or video to begin your session.</p>
                                </div>
                                <div class="text-center p-6 bg-white dark:bg-gray-700 rounded-lg shadow-lg">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 13H9v-2h2v2zm0-4H9V7h2v4zm4 4h-2v-2h2v2zm0-4h-2V7h2v4z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Analyze</h3>
                                    <p class="text-sm">Our AI processes your input to detect your current emotional state.</p>
                                </div>
                                <div class="text-center p-6 bg-white dark:bg-gray-700 rounded-lg shadow-lg">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M13 14h-2V9h2v5zm-2 2h2v2h-2v-2zm-1-8V4h-2c-1.1 0-2 .9-2 2v6c0 1.1.9 2 2 2h2v2h-2c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2v-2c0-1.1-.9-2-2-2h-2v-2h2c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Insight</h3>
                                    <p class="text-sm">Receive a personalized summary of your emotions and a comprehensive mood analysis.</p>
                                </div>
                                <div class="text-center p-6 bg-white dark:bg-gray-700 rounded-lg shadow-lg">
                                    <svg class="w-16 h-16 mx-auto mb-4 text-mindmate-blue dark:text-mindmate-blue-light" fill="currentColor" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-1 6h2v6h-2zm0 8h2v2h-2z"/></svg>
                                    <h3 class="text-xl font-bold mb-2">Empower</h3>
                                    <p class="text-sm">Get practical recommendations to help you manage emotions and enhance your well-being.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Testimonials':
                    page = document.createElement('section');
                    page.id = 'testimonials';
                    page.className = "bg-white dark:bg-gray-800 py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-16">What Our Users Say</h2>
                            <div class="flex flex-col md:flex-row space-y-8 md:space-y-0 md:space-x-8">
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-mindmate-bg-dark dark:text-mindmate-bg tilt-element">
                                    <p class="italic text-lg mb-4">"MindMate has been a game-changer for my study habits. I'm more aware of my emotional state and can manage my focus better. It feels like having a personal coach."</p>
                                    <p class="font-bold">- Jessica, College Student</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-mindmate-bg-dark dark:text-mindmate-bg tilt-element">
                                    <p class="italic text-lg mb-4">"I use MindMate to better understand my students' learning challenges. It helps me create a more supportive and effective classroom environment."</p>
                                    <p class="font-bold">- Mr. Clark, Educator</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-8 rounded-lg shadow-lg text-mindmate-bg-dark dark:text-mindmate-bg tilt-element">
                                    <p class="italic text-lg mb-4">"I was skeptical at first, but the insights I've gained have been invaluable. MindMate is a fantastic tool for anyone serious about their well-being."</p>
                                    <p class="font-bold">- Alex, Beta User</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Pricing':
                    page = document.createElement('section');
                    page.id = 'pricing';
                    page.className = "bg-mindmate-bg dark:bg-mindmate-bg-dark py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-16 text-mindmate-bg-dark dark:text-mindmate-bg">Pricing & Plans</h2>
                            <div class="flex flex-col md:flex-row justify-center space-y-8 md:space-y-0 md:space-x-8">
                                <div class="bg-white dark:bg-gray-700 p-10 rounded-lg shadow-xl text-center flex flex-col items-center">
                                    <h3 class="text-2xl font-bold text-mindmate-blue mb-2">Basic</h3>
                                    <p class="text-5xl font-extrabold text-mindmate-bg-dark dark:text-mindmate-bg mb-4">$0<span class="text-lg font-normal text-gray-500">/month</span></p>
                                    <ul class="text-gray-600 dark:text-gray-300 space-y-2 mb-6 text-left">
                                        <li>✓ Core Emotion Detection</li>
                                        <li>✓ Basic Mood Tracking</li>
                                        <li>✓ Limited Daily Insights</li>
                                        <li>✓ Community Access</li>
                                    </ul>
                                    <button class="bg-mindmate-purple text-white font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">Get Started</button>
                                </div>
                                <div class="bg-mindmate-purple dark:bg-mindmate-purple-dark text-white p-10 rounded-lg shadow-xl text-center flex flex-col items-center">
                                    <h3 class="text-2xl font-bold mb-2">Premium</h3>
                                    <p class="text-5xl font-extrabold mb-4">$9.99<span class="text-lg font-normal text-gray-300">/month</span></p>
                                    <ul class="space-y-2 mb-6 text-left">
                                        <li>✓ Everything in Basic</li>
                                        <li>✓ Advanced Analytics Dashboard</li>
                                        <li>✓ Unlimited Daily Insights</li>
                                        <li>✓ Personalized Recommendations</li>
                                        <li>✓ Priority Support</li>
                                    </ul>
                                    <button class="bg-white text-mindmate-purple font-bold py-3 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">Choose Plan</button>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Blog':
                    page = document.createElement('section');
                    page.id = 'blog';
                    page.className = "bg-white dark:bg-gray-800 py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-6xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-16 text-mindmate-bg-dark dark:text-mindmate-bg">Resources for Your Wellness</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
                                    <h4 class="text-lg font-bold mb-2">5 Ways to Manage Exam Stress</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">Simple, effective techniques to keep your cool during finals week.</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
                                    <h4 class="text-lg font-bold mb-2">The Science of Focus: An AI Perspective</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">How MindMate's AI helps you unlock your true productivity potential.</p>
                                </div>
                                <div class="bg-mindmate-bg dark:bg-gray-700 p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300">
                                    <h4 class="text-lg font-bold mb-2">Mindfulness for Modern Students</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-300">Quick and easy mindfulness practices you can do between classes.</p>
                                </div>
                            </div>
                        </div>
                    `;
                    break;
                case 'Contact':
                    page = document.createElement('section');
                    page.id = 'contact';
                    page.className = "bg-mindmate-bg dark:bg-mindmate-bg-dark py-24 min-h-screen pt-40";
                    page.innerHTML = `
                        <div class="container mx-auto px-4 max-w-2xl">
                            <h2 class="text-4xl font-bold font-heading text-center mb-12 text-mindmate-bg-dark dark:text-mindmate-bg">Stay Connected</h2>
                            <p class="text-center text-lg text-gray-600 dark:text-gray-300 mb-8">Get weekly wellness tips, product updates, and exclusive resources directly in your inbox.</p>
                            <form id="newsletter-form" class="flex flex-col sm:flex-row space-y-4 sm:space-y-0 sm:space-x-4">
                                <input id="email-input" type="email" placeholder="Enter your email" class="flex-1 p-4 rounded-full border-2 border-gray-300 dark:bg-gray-700 dark:text-white dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-mindmate-blue transition-colors duration-200" />
                                <button type="submit" class="bg-mindmate-purple text-white font-bold py-4 px-8 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                    Sign Up
                                </button>
                            </form>
                            <p id="form-status" class="text-center mt-4"></p>
                        </div>
                    `;
                    page.querySelector('#newsletter-form').addEventListener('submit', handleNewsletterSubmit);
                    break;
                default:
                    page = document.createElement('section');
                    page.textContent = 'Page not found.';
                    break;
            }
            return page;
        };
        
        const handleNewsletterSubmit = async (e) => {
            e.preventDefault();
            const emailInput = document.getElementById('email-input');
            const formStatus = document.getElementById('form-status');
            const email = emailInput.value.trim();

            if (!email || !db) {
                formStatus.textContent = 'Please enter a valid email.';
                return;
            }

            try {
                const newsletterRef = collection(db, `/artifacts/${appId}/public/data/newsletter_signups`);
                await addDoc(newsletterRef, {
                    email: email,
                    timestamp: serverTimestamp(),
                });
                emailInput.value = '';
                formStatus.textContent = 'Thank you for signing up!';
            } catch (e) {
                console.error("Error adding document: ", e);
                formStatus.textContent = 'Failed to sign up. Please try again.';
            }
        };

        const initializeAnimations = () => {
            // Vanta.js
            if (currentPage === 'Home') {
                const heroRef = document.getElementById('vanta-bg');
                if (heroRef && window.VANTA) {
                    window.VANTA.NET({
                        el: heroRef,
                        mouseControls: true,
                        touchControls: true,
                        gyroControls: false,
                        minHeight: 200.00,
                        minWidth: 200.00,
                        scale: 1.00,
                        scaleMobile: 1.00,
                        color: theme === 'dark' ? 0x6A67FE : 0x8E9BFF,
                        backgroundColor: theme === 'dark' ? 0x1A202C : 0xF5F7FA,
                    });
                }
            }

            // VanillaTilt.js
            if (window.VanillaTilt) {
                const tiltElements = document.querySelectorAll('.tilt-element');
                tiltElements.forEach(el => {
                    if (el.vanillaTilt) el.vanillaTilt.destroy();
                });
                window.VanillaTilt.init(tiltElements, {
                    max: 10,
                    speed: 400,
                    glare: true,
                    'max-glare': 0.5
                });
            }

            // Scroll animations
            const observer = new IntersectionObserver(
                (entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                        }
                    });
                },
                { threshold: 0.1 }
            );
            document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));
        };

        // Initialize on window load
        window.onload = () => {
            tailwind.config = tailwindConfig;
            document.documentElement.className = theme === 'dark' ? 'dark' : '';
            render();
        };

    </script>
</body>
</html>
